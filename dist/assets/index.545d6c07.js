var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,i=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&a(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&a(e,r,t[r]);return e},c=(e,o)=>t(e,r(o));"undefined"!=typeof require&&require;import{p as d,y as p,l as u,c as l,v as y,d as m,S as f}from"./vendor.4b088683.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const h=e=>{const t={text:e,mode:"PAUSED",position:0,keyOfDeath:void 0};return d(((e,r)=>{switch(e.mode){case"LOST":switch(r.type){case"RESET":return t;default:return e}case"PAUSED":switch(r.type){case"RESUME":return c(i({},e),{mode:"PLAYING"});default:return e}case"PLAYING":switch(r.type){case"KEY_DOWN":return((e,t)=>{if("KEY_DOWN"!==t.type||(r=t.keyboardEvent,(o=r).altkey||o.ctrlKey||o.metaKey||!(({keyCode:e})=>e>47&&e<58||32==e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223)(r)))return e;var r,o;const n=t.keyboardEvent.key===e.text[e.position],s=e.position===e.text.length-1;return c(i({},e),n&&s?{mode:"WON",position:e.position+1}:n?{position:e.position+1}:{mode:"LOST",keyOfDeath:t.keyboardEvent.key})})(e,r);case"PAUSE":return c(i({},e),{mode:"PAUSED"});default:return e}case"WON":switch(r.type){case"RESET":return t;default:return e}}}),t)},E=(e,t,r=[])=>{p((()=>(window.addEventListener(e,t),()=>window.removeEventListener(e,t))),r)},v=({text:e})=>{const[t,r]=h(e),o=(()=>{const[e,t]=u(!0);return E("focus",(()=>{t(!0)})),E("blur",(()=>{t(!1)})),e})();return p((()=>{o||r({type:"PAUSE"})}),[o]),p((()=>{"WON"===t.mode&&l()}),[t.mode]),E("keydown",(e=>r({type:"KEY_DOWN",keyboardEvent:e}))),y("div",{"data-mode":t.mode},y(g,{state:t,dispatch:r}),y(N,{state:t}))},g=({state:e,dispatch:t})=>y("div",{style:"min-height: 1.5rem;"},"PAUSED"===e.mode&&y(O,{dispatch:t}),"LOST"===e.mode&&y(k,{state:e,dispatch:t}),"WON"===e.mode&&y(S,{dispatch:t}),"PLAYING"===e.mode&&y(b,{state:e})),b=({state:e})=>y("div",{className:"heads-up-display"},y(x,{state:e})),x=({state:e})=>{const t=e.position/e.text.length,r=Math.round(100*t);return y("strong",{},r+"%")},O=({dispatch:e})=>(E("keypress",(()=>e({type:"RESUME"}))),y("strong",{},"Press any key to continue.")),k=({state:e,dispatch:t})=>{var r;const o=(null==(r=e.keyOfDeath)?void 0:r.trim())?`"${e.keyOfDeath}"`:"space";return y("div",{},y("strong",{},`You typed ${o}.`)," ",y(A,{dispatch:t}))},S=({dispatch:e})=>y("div",{},y("strong",{},"You succeeded!")," ",y(A,{dispatch:e})),A=({dispatch:e})=>y("button",{onClick:()=>e({type:"RESET"})},"Reset"),N=({state:e})=>y("div",{className:"text"},e.text.split("").map(((t,r)=>y("span",{className:w(r<e.position&&"typed"," "===t&&"space",r===e.position&&"cursor")},t)))),w=(...e)=>e.filter((e=>!!e)).join(" "),D={text:"Perfect practice makes perfect.",mode:"GAME"};function P(e,t){const r=((e,t)=>r=>{switch(e){case"GAME":switch(t.type){case"EDIT":return c(i({},r),{mode:"EDIT"});default:return r}case"EDIT":switch(t.type){case"CANCEL":return c(i({},r),{mode:"GAME"});case"SAVE":return c(i({},r),{mode:"GAME",text:(o=t.text,o.trim().replaceAll(/[\s\r\n]+/g," ")||r.text)});default:return r}default:return r}var o})(e.mode,t)(e);var o;return r.text!==e.text&&(o=r.text,localStorage.setItem("text",o)),r}function L(){const e=localStorage.getItem("text");return e&&(D.text=e),d(P,D)}const C=({state:e,dispatch:t})=>y(m,{},y(v,{text:e.text}),y(I,{dispatch:t})),I=({dispatch:e})=>y("div",{},y("button",{onClick:()=>e({type:"EDIT"})},"Edit")),T=({state:e,dispatch:t})=>{const[r,o]=u(e.text);return y(m,{},y(M,{text:r,onChange:e=>o(e.target.value)}),y(j,{cancel:()=>t({type:"CANCEL"}),save:()=>t({type:"SAVE",text:r})}))},M=({text:e,onChange:t})=>y("textarea",{id:"editor",onChange:t,value:e}),j=({cancel:e,save:t})=>y("div",{},y("button",{onClick:e},"Cancel"),y("button",{onClick:t},"Save"));f(y((()=>{const[e,t]=L();return y("div",{className:"content"},"GAME"===e.mode&&y(C,{state:e,dispatch:t}),"EDIT"===e.mode&&y(T,{state:e,dispatch:t}))})),document.getElementById("app"));
