var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,i=(e,t)=>{for(var o in t||(t={}))n.call(t,o)&&a(e,o,t[o]);if(r)for(var o of r(t))s.call(t,o)&&a(e,o,t[o]);return e},c=(e,r)=>t(e,o(r));"undefined"!=typeof require&&require;import{p as d,y as p,l as u,c as l,v as m,s as y,d as f,S as h}from"./vendor.fa22d384.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const g="PLAYING",v="WON",E="LOST",k="PAUSED",x="KEY_DOWN",b="RESET",O="PAUSE",w="RESUME",C=(e,t,o=[])=>{p((()=>(window.addEventListener(e,t),()=>window.removeEventListener(e,t))),o)};function A({text:e}){const[t,o]=(e=>{const t={text:e,mode:k,position:0,keyOfDeath:void 0},o={[g]:{[x]:(e,t)=>{if((r=o=t.e).altkey||r.ctrlKey||r.metaKey||!(({keyCode:e})=>e>47&&e<58||32==e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223)(o))return e;var o,r;const n=e=>c(i({},e),{position:e.position+1}),s=(e,t)=>c(i({},e),{mode:E,keyOfDeath:t}),a=e=>c(i({},e),{mode:v,position:e.position+1}),d=t.e.key===e.text[e.position];return e.position===e.text.length-1&&d?a(e):d?n(e):s(e,t.e.key)},[b]:()=>t,[O]:e=>c(i({},e),{mode:k})},[v]:{[b]:()=>t},[E]:{[b]:()=>t},[k]:{[w]:e=>c(i({},e),{mode:g})}};return d(((e,t)=>{const r=o[e.mode][t.type];return r?r(e,t):e}),t)})(e),r=(()=>{const[e,t]=u(!0);return C("focus",(()=>{t(!0)})),C("blur",(()=>{t(!1)})),e})();return p((()=>{r||o({type:O})}),[r]),p((()=>{t.mode===v&&l()}),[t.mode]),C("keydown",(e=>o({type:x,e:e}))),m("div",{"data-mode":t.mode},m(L,{state:t,dispatch:o}),m(T,{state:t}))}const L=({state:e,dispatch:t})=>{const o=(()=>{const[e,t]=u(void 0);return C("keydown",(o=>{o.getModifierState&&("CapsLock"===o.key?t(!e):t(o.getModifierState("CapsLock")))}),[e,t]),e})();return m("div",{style:"min-height: 1.5rem;"},e.mode===k&&m(D,{dispatch:t}),e.mode===E&&m(P,{state:e,dispatch:t}),e.mode===v&&m(M,{state:e,dispatch:t}),e.mode===g&&m(S,{state:e,capsLockIsOn:o}))},S=({state:e,capsLockIsOn:t})=>m("div",{className:"heads-up-display"},m(N,{state:e}),t&&m(I)),I=()=>m("strong",{className:"caps-lock-warning"},"caps lock"),N=({state:e})=>{const t=e.position/e.text.length,o=Math.round(100*t);return m("strong",{},o+"%")},D=({dispatch:e})=>(C("keypress",(()=>e({type:w}))),m("strong",{},"Press any key to continue.")),P=({state:e,dispatch:t})=>{const o=e.keyOfDeath.trim()?`"${e.keyOfDeath}"`:"space";return m("div",{},m("strong",{},`You typed ${o}.`)," ",m(j,{dispatch:t}))},M=({dispatch:e})=>m("div",{},m("strong",{},"You succeeded!")," ",m(j,{dispatch:e})),j=({dispatch:e})=>{const t=y(null);p((()=>{t.current&&t.current.focus()}),[t]);return m("button",{onClick:()=>e({type:b}),ref:t},"Reset")},T=({state:e})=>m("div",{className:"text"},e.text.split("").map(((t,o)=>m("span",{className:G(o<e.position&&"typed"," "===t&&"space",o===e.position&&"cursor")},t)))),G=(...e)=>e.filter((e=>!!e)).join(" "),K={text:"Perfect practice makes perfect.",mode:"GAME"};function Y(e,t){const o=((e,t)=>o=>{switch(e){case"GAME":switch(t.type){case"EDIT":return c(i({},o),{mode:"EDIT"});default:return o}case"EDIT":switch(t.type){case"CANCEL":return c(i({},o),{mode:"GAME"});case"SAVE":return c(i({},o),{mode:"GAME",text:(r=t.text,r.trim().replaceAll(/[\s\r\n]+/g," ")||o.text)});default:return o}default:return o}var r})(e.mode,t)(e);var r;return o.text!==e.text&&(r=o.text,localStorage.setItem("text",r)),o}function q(){const e=localStorage.getItem("text");return e&&(K.text=e),d(Y,K)}const R=({state:e,dispatch:t})=>m(f,{},m(A,{text:e.text}),m(U,{dispatch:t})),U=({dispatch:e})=>m("div",{},m("button",{onClick:()=>e({type:"EDIT"})},"Edit")),V=({state:e,dispatch:t})=>{const[o,r]=u(e.text);return m(f,{},m(W,{text:o,onChange:e=>r(e.target.value)}),m($,{cancel:()=>t({type:"CANCEL"}),save:()=>t({type:"SAVE",text:o})}))},W=({text:e,onChange:t})=>m("textarea",{id:"editor",onChange:t,value:e}),$=({cancel:e,save:t})=>m("div",{},m("button",{onClick:e},"Cancel"),m("button",{onClick:t},"Save"));h(m((()=>{const[e,t]=q();return m("div",{className:"content"},"GAME"===e.mode&&m(R,{state:e,dispatch:t}),"EDIT"===e.mode&&m(V,{state:e,dispatch:t}))})),document.getElementById("app"));
